<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASSignment 21</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

</head>
<body>
<h3 class="text text-dark text-center" id="promise"></h3>


<h3 class="display-6" style="text-align: center; ">Fetch Table</h3>

    <input type="button" class="btn btn-success"  value="Show Table"   onclick="fn_getData()"  />
    
    <br/>
    <table  id="tbl"  width="500" class="table table-striped-columns table-hover table-info" cellpadding="10" cellspacing="10">
    <tr>
        <th>Name</th>
        <th>City</th>
        <th>Country</th>
    </tr>
</table>


<hr/> 	

<h3 class="text text-primary" style="text-align: center;" >Fetch into Table</h3>

    <input type="button" class="btn btn-warning"  value="Show Table"   onclick="gettableData()"  />
    </div>
    <br/>
    <table  id="table2"  width="500" class="table table-hover table-hover table-primary table-bordered" cellpadding="10" cellspacing="10">
    <tr>
        
        <th>Id No</th>
        <th>Avatar</th>
            <th>Email</th>
            <th>First Name</th>
            <th>Last Name</th>
    </tr>
</table>





<script>	 
	        		
    function gettableData()
    { 
    let url = "https://reqres.in/api/users";
             
    fetch(url).then( (response)  => 
    {
            response.json().then(  (in_data)  =>  
            { 
                dp(  in_data.data ); 					
            });

    }).catch((error) => 
    {
            alert("ERROR")
    });
 
}  

function   dp(  in_data )
{
    var  str  = "";
                    
                    for( var  item of in_data )
                    { 
                        str  +=  "<tr>"; 
                            str  +=  "<td>" + "<b>" + item.id +  "<b>" + "</td>"; 
                            
                                str  +=  "<td>" + "<img src =" + item.avatar + ">"  +  "</td>"; 
                        str  +=  "<td>" +  item.email +  "</td>"; 
                        str  +=  "<td>" +  item.first_name +  "</td>"; 
                        str  +=  "<td>" +  item.last_name +  "</td>"; 
                        str  +=  "</tr>"; 
                    }
                    
                    var  tableObj =  document.getElementById("table2");	 	
                    tableObj.innerHTML += str;
                
}
 

</script>	 

<script>	 
                
    function fn_getData()
    { 
    let url = "https://www.w3schools.com/angular/customers.php";
             
    fetch(url).then( (response)  => 
    {
            response.json().then(  (in_data)  =>  
            { 
                displayData(  in_data.records ); 					
            });

    }).catch((error) => 
    {
            alert("Data not foound-ERROR")
    });
 
}  

function   displayData(  in_data )
{
    var  str  = "";
                    
                    for( var  item of in_data )
                    { 
                        str  +=  "<tr>"; 
                        str  +=  "<td>" + "<b>" + item.Name +  "<b>" + "</td>"; 
                        str  +=  "<td>" +  item.City +  "</td>"; 
                        str  +=  "<td>" +  item.Country +  "</td>"; 
                        str  +=  "</tr>"; 
                    }
                    
                    var  tableObj =  document.getElementById("tbl");	 	
                    tableObj.innerHTML += str;
                
}
 

</script>	


    <script>
        let x = Math.floor(Math.random() * 100);
        console.log(x);
        const  promiseObj  = new Promise( (resolve, reject)  => 
		{
            if( x % 5 == 0)
				{
						resolve("The Value is: " + x);		
				}
				else
				{
					 reject("Rejected Value is: " + x);		
				}		 
		});	
        promiseObj.then(  (resolve) => 
		{
            document.getElementById("promise").innerHTML = resolve;
			console.log(resolve);
		})
		.catch(  (reject) => 
		{ document.getElementById("promise").innerHTML = reject;
			
			console.log(reject);
		});

    </script>
    
</body>
</html>